# 🔧 403 Forbidden エラー対処法

## エラーメッセージ

```
403 Client Error: Forbidden for url: https://freeeeeeestyle.com/wp-json/wp/v2/posts
```

## 原因

403エラーは、WordPressのREST APIへのアクセスが**認証によって拒否された**ことを示しています。

## ✅ 解決方法

### ステップ1: WordPressのアプリケーションパスワードを確認

1. **WordPress管理画面にログイン**
   - https://freeeeeeestyle.com/wp-admin/ にアクセス

2. **プロフィールページを開く**
   - 左メニュー「ユーザー」→「プロフィール」
   - または、右上のユーザー名をクリック→「プロフィールを編集」

3. **アプリケーションパスワードを確認**
   - ページを下にスクロール
   - 「アプリケーションパスワード」セクションを確認
   - 既存のパスワードがあるか確認
   - もしない場合は、新しいパスワードを作成

4. **新しいパスワードを作成（必要に応じて）**
   - 名前を入力（例：「GitHub Actions用」）
   - 「新しいアプリケーションパスワードを追加」をクリック
   - **表示されたパスワードをコピー**（一度しか表示されない！）

### ステップ2: GitHub Secretsを更新

1. **GitHubリポジトリページを開く**
   ```
   https://github.com/KeijiSuetsugu/blog-auto-poster
   ```

2. **「Settings」→「Secrets and variables」→「Actions」を開く**

3. **`WORDPRESS_PASSWORD`を更新**
   - `WORDPRESS_PASSWORD`の右側の鉛筆アイコン（編集）をクリック
   - または、削除して再作成
   - **Secret**欄に、ステップ1でコピーした**新しいアプリケーションパスワード**を貼り付け
   - **余分なスペースや改行がないか確認**
   - 「Update secret」をクリック

4. **`WORDPRESS_USERNAME`も確認**
   - 正しいユーザー名が設定されているか確認
   - 例：`onepeace0710`

### ステップ3: WordPressのREST APIが有効か確認

1. **WordPress管理画面で確認**
   - 「設定」→「パーマリンク設定」を開く
   - 「変更を保存」をクリック（これでREST APIが有効になる場合があります）

2. **REST APIがブロックされていないか確認**
   - プラグインでREST APIをブロックしているものがないか確認
   - セキュリティプラグインがREST APIをブロックしていないか確認

### ステップ4: 再度ワークフローを実行

1. 「Actions」タブをクリック
2. 「毎日のブログ投稿」ワークフローを選択
3. 「Run workflow」ボタンをクリック
4. 実行ログを確認

## 🆘 まだ403エラーが出る場合

### 確認事項

1. **アプリケーションパスワードが正しいか**
   - パスワードをコピーする際、**全部コピー**できているか
   - スペースが含まれていないか
   - 改行が含まれていないか

2. **ユーザー名が正しいか**
   - WordPressにログインする際に使用する**ユーザー名**と一致しているか
   - メールアドレスではないか（ユーザー名を使用）

3. **WordPressのバージョン**
   - WordPress 5.6以降では、アプリケーションパスワードが標準で利用可能
   - 古いバージョンの場合は、プラグインが必要な場合があります

### デバッグ情報を確認

GitHub Actionsのログで以下を確認：
- `DEBUG: ユーザー名: ...` - 正しいユーザー名が表示されているか
- `DEBUG: パスワードの長さ: ...` - パスワードが正しく読み込まれているか
- `レスポンス内容: ...` - WordPressからのエラーメッセージを確認

## 📝 よくある間違い

1. **通常のログインパスワードを使用している**
   - ❌ 間違い：通常のパスワード
   - ✅ 正しい：アプリケーションパスワード

2. **メールアドレスをユーザー名として使用している**
   - ❌ 間違い：メールアドレス
   - ✅ 正しい：ユーザー名（例：`onepeace0710`）

3. **パスワードに余分なスペースが含まれている**
   - コピー&ペースト時に注意

## ✅ まとめ

1. ✅ WordPressでアプリケーションパスワードを確認/作成
2. ✅ GitHub Secretsの`WORDPRESS_PASSWORD`を更新
3. ✅ `WORDPRESS_USERNAME`も確認
4. ✅ ワークフローを再実行

これで解決するはずです！


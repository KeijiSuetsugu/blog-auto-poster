# 🔧 トラブルシューティングガイド

> **📖 補足**: 「Default project」しか選べない場合の詳しい対処法は、**[Default_Project_対処法.md](Default_Project_対処法.md)** を参照してください。

## OpenAI APIクォータエラー（429エラー）の対処法

### エラーメッセージ
```
Error code: 429 - insufficient_quota
You exceeded your current quota
```

### 原因

このエラーは、**APIキーが特定のプロジェクトに紐づいている場合**によく発生します。

`sk-proj-`で始まるAPIキーは、**プロジェクト固有のAPIキー**です。プロジェクトごとにクォータが設定されているため、アカウント全体にクレジットがあっても、プロジェクトのクォータを使い切っているとこのエラーが出ます。

### 対処方法

#### 方法1: プロジェクトのクォータ設定を確認・変更

1. OpenAIダッシュボードにログイン
   - https://platform.openai.com/ にアクセス

2. プロジェクト設定を確認
   - 左のメニューから「Settings」→「Projects」を選択
   - 現在のプロジェクトを確認

3. プロジェクトのクォータを確認・変更
   - プロジェクト名をクリック
   - 「Usage & Billing」または「Quotas」セクションを確認
   - 必要に応じてクォータを増やすか、制限を解除

#### 方法2: 新しいAPIキーを生成（推奨）

組織レベルまたはアカウントレベルのAPIキーを使用する：

1. OpenAIダッシュボードにログイン
   - https://platform.openai.com/ にアクセス

2. API Keysページに移動
   - 右上の名前/アイコン → 「API keys」

3. 新しいキーを作成
   - 「+ Create new secret key」をクリック
   - **重要**: キーを作成する際、特定のプロジェクトに紐づけずに作成するか、クォータが十分なプロジェクトに紐づける

4. 新しいキーを`.env`ファイルに設定
   - 新しいAPIキーをコピー
   - `.env`ファイルの`OPENAI_API_KEY`を更新

#### 方法3: 組織レベルの設定を確認

1. 組織設定を確認
   - https://platform.openai.com/org-settings
   - 組織全体のクォータ設定を確認

2. プロジェクトごとのクォータ制限を確認
   - プロジェクト設定で、クォータが制限されていないか確認

### 確認すべきポイント

✅ **アカウント全体のクレジット残高**
- https://platform.openai.com/account/billing で確認

✅ **プロジェクト固有のクォータ**
- プロジェクト設定で確認

✅ **APIキーの種類**
- `sk-proj-`で始まる = プロジェクト固有
- `sk-`で始まる（`proj`がない）= 組織/アカウントレベル

✅ **レート制限**
- 短時間に多くのリクエストを送っていないか確認

### 一時的な回避策

プロジェクトのクォータがリセットされるまで待つか、新しいプロジェクトを作成してそのAPIキーを使用してください。

---

## その他のよくある問題

### WordPress認証エラー

**エラー**: `401 Unauthorized`

**対処法**:
1. アプリケーションパスワードが正しくコピーされているか確認（スペースが入っていないか）
2. WordPressのユーザー名が正しいか確認
3. アプリケーションパスワードが無効になっていないか確認

### 記事が投稿されない

**確認事項**:
1. WordPressのREST APIが有効になっているか
2. プラグインでREST APIがブロックされていないか
3. `.env`ファイルの設定が正しいか

---

## サポート

上記の方法で解決しない場合は、以下を確認してください：

1. エラーメッセージの全文
2. `.env`ファイルの設定（機密情報は除く）
3. OpenAIダッシュボードの設定画面のスクリーンショット（必要に応じて）


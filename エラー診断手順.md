# 🔍 エラー診断手順

## エラーが続く場合の確認手順

### ステップ1: GitHub Actionsのログを詳しく見る

1. GitHubリポジトリページで「**Actions**」タブをクリック
2. 失敗したワークフロー実行（赤い×印）をクリック
3. 「**post**」というステップをクリック
4. ログを下にスクロールして、**エラーメッセージを探す**

**特に以下のステップのログを見てください：**
- 「環境変数を確認」- Secretsが設定されているか
- 「ブログ記事を投稿」- ここでエラーが出ている可能性が高い

### ステップ2: よくあるエラーパターン

#### エラー1: "WORDPRESS_USERNAMEとWORDPRESS_PASSWORDを.envファイルに設定してください"

**原因：** GitHub Secretsが設定されていない

**解決方法：**
1. Settings → Secrets and variables → Actions
2. 4つのSecretsがすべて設定されているか確認
3. 設定されていないものがあれば追加

#### エラー2: "ModuleNotFoundError: No module named 'xxx'"

**原因：** 依存パッケージがインストールされていない

**解決方法：**
- `requirements.txt`に必要なパッケージがすべて含まれているか確認
- ログで「依存パッケージをインストール」ステップが成功しているか確認

#### エラー3: "Error code: 401"（WordPress認証エラー）

**原因：** WordPressの認証情報が間違っている

**解決方法：**
- GitHub Secretsの`WORDPRESS_USERNAME`と`WORDPRESS_PASSWORD`を再確認
- アプリケーションパスワードが正しいか確認

#### エラー4: "Error code: 429"（OpenAI API）

**原因：** OpenAI APIキーのクォータ不足

**解決方法：**
- OpenAIアカウントのクレジット残高を確認
- APIキーが正しいか確認

#### エラー5: "ConnectionError" または "Timeout"

**原因：** ネットワーク接続の問題

**解決方法：**
- 一時的な問題の可能性があります
- 再度ワークフローを実行してみる

### ステップ3: ローカルでテストする

GitHub Actionsで動かない場合は、ローカルでテストしてみます：

1. ターミナルで以下を実行：

```bash
cd "/Users/keiji/Desktop/開発/新規事業（人間関係）"
python3 main.py
```

2. エラーが出る場合は、そのエラーメッセージを確認
3. ローカルで動くなら、GitHub Actionsの環境の問題

### ステップ4: デバッグ用の詳細ログを追加

ワークフローに詳細なログ出力を追加します（既に追加済み）。

### ステップ5: GitHub Secretsを再確認

**これが最も多い原因です！**

1. Settings → Secrets and variables → Actions を開く
2. 以下の4つが**すべて**設定されているか確認：
   - ✅ WORDPRESS_URL
   - ✅ WORDPRESS_USERNAME
   - ✅ WORDPRESS_PASSWORD
   - ✅ OPENAI_API_KEY

3. **各Secretの値が正しいか確認：**
   - 余分なスペースがないか
   - 全部コピーできているか（途中で切れていないか）

## 📝 ログの見方

GitHub Actionsのログで探すべき情報：

1. **「環境変数を確認」ステップの出力**
   - 各Secretが「YES」か「NO」か確認
   - 「NO」になっているものがあれば、それが原因

2. **「ブログ記事を投稿」ステップの出力**
   - エラーメッセージの全文をコピー
   - エラーメッセージを教えてください

3. **Pythonのエラートレースバック**
   - `Traceback (most recent call last):`から始まる部分
   - どのファイルのどの行でエラーが出ているか

## 🆘 それでもわからない場合

以下の情報を教えてください：

1. **「環境変数を確認」ステップの出力**
   - 各Secretが「YES」か「NO」か

2. **「ブログ記事を投稿」ステップのエラーメッセージ**
   - エラーメッセージの全文

3. **ローカルでの実行結果**
   - `python3 main.py`を実行した結果

この情報があれば、原因を特定できます！

